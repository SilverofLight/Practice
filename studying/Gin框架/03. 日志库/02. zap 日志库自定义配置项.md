# 定制 logger

## 将日志写入文件而不是终端

我们将使用 `zap.New(...)` 方法来手动传递所有配置，而不是使用像 `zap.NewProduction()` 这样的预制方法来创建 logger
~~~go
func New(core zapcore.Core, options ...Options) *logger
~~~
`zapcore.Core` 需要三个配置—— `Encoder`, `WriteSyncer`, `LogLevel`。
### Encoder

编码器（如何写入日志）。我们将使用开箱即用的 `NewJSONEncoder()`，并使用预先设置的 `ProductionEncoderConfig()`。

~~~go
zapcore.NewJSONEncoder(zap.NewProductionEncoderConfig())
~~~
### WirterSyncer

指定日志将写到哪里去。我们使用 `zapcore.AddSync()` 函数并且将打开的文件句柄穿进去。
~~~go
file, _ := os.Create("./test.log")
writeSyncer := zapcore.AddSync(file)
~~~
### Log Level

哪种级别的日志将被写入
我们将修改上述部分中的 Logger 代码，并重写 `InitLogger()` 方法。其余方法保持不变
~~~go
func InitLogger(){
	writeSyncer := getLogWriter()
	encoder := getEncoder()
	core := zapcore.NewCore(encoder, writeSyncer, zapcore.DebugLevel)

	logger = zap.New(core) // logger 全局定义
	sugarLogger = logger.Sugar()
}
func getEncoder() zapcore.Encoder {
	return zapcore.NewJSONEncoder(zap.NewProductionEncoderConfig())
}
func getLogWriter() zapcore.WirteSyncer {
	fule, _ := os.Creat("./test.log")
	return zapcore.AddSync(file)
}
~~~
### 将 JSON Encoder 更改为普通的 Log Encoder

需要将 `NewJSONEncoder()` 更改为 `NewConsoleEncoder()`.
~~~go
return zapcore.NewConsoleEncoder(zap.NewProductionEncoderConfig())
~~~
