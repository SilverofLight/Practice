# 1.Web 的工作原理

# 1. HTTP协议

HTTP由请求和响应构成，是一个标准的客户端服务器模型。

HTTP协议是无状态的，所以对服务器来说，不知道两个请求是否来自同一个客户端，所以引入了Session和Cookie机制来维护连接的可持续状态。

## a. HTTP Request（请求）

请求由请求行（Request Line）、请求头部（Header）、空行和请求数据等四个部分组成

第一行是请求行，如GET，为 一种请求类型

请求头部：从第二行开始为请求头部，Host表示请求的目的地；User-Agent是客户端的信息，由浏览器定义，并且由浏览器自动加到请求中

空行：请求头下必须有一个空行

请求数据：请求的数据也叫作实体，可以添加所需的其他数据

## b. HTTP Response（响应）

和请求类似，响应分为：

状态行：由协议版本号、状态码和状态消息加成

响应头：是客户端可以使用的一些信息，如Data（生成响应的日期），Content-Type（MIME类型及编码格式），Connection（默认是长连接）等

空行：响应头和响应体质检必须有一个空行

响应体：响应正文

其中状态码由3位数字组成，共有5类。

# 2. 访问Web站点的过程

1. 客户机通过TCP/IP协议建立到服务器的TCP连接
2. 客户端想服务器发送HTTP协议请求包，请求服务器里的资源文件
3. 服务器向客户机发送HTTP协议响应包，如果请求的资源包含有动态语言（运行期间才去做数据类型检查的语言）的内容，那么服务器会调用动态语言的解释引擎处理动态内容，并将处理数据返回给客户端
4. TCP断开，即客户机和服务端断开。由客户端解释MTML文档，在客户端屏幕上渲染图形结果。